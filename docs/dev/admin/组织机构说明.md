# 组织机构说明

## 什么是组织机构？

在本项目中，**组织机构** 指的就是 **部门（部门管理）** 的树形结构，用于对**用户**进行分组和权限划分。

- **菜单位置**：系统管理 → 权限管理 → **用户列表**
- **页面布局**：左侧是 **部门树（组织机构）**，右侧是该部门下的用户列表
- **数据表**：`base_sys_department`（部门表，通过 `parentId` 形成树形结构）

## 组织机构的作用

1. **给用户归属部门**：新增/编辑用户时选择「部门」，用户就归属到该部门下。
2. **按部门筛用户**：在用户列表左侧点击某个部门，右侧只显示该部门及其子部门下的用户。
3. **数据权限**：角色可以配置「数据权限」关联部门，从而限制用户只能看到某些部门的数据。
4. **用户转移**：可将多个用户批量「转移」到另一个部门。

## 如何使用

### 1. 维护部门树（组织机构）

- 在 **用户列表** 页面左侧「部门列表」中：
  - **新增部门**：点击「新增部门」，填写上级部门、名称、排序等。
  - **编辑/删除**：对已有部门进行编辑或删除（注意子部门会一并受影响）。
  - **拖动排序**：可拖动部门调整顺序。
- 部门是树形结构：有「上级部门」「排序」，可多级嵌套（如：公司 → 大区 → 门店）。

### 2. 给用户分配部门

- 新增用户或编辑用户时，在表单里选择 **部门**（通常与「角色」等一起配置）。
- 用户的 `departmentId` 会保存到 `base_sys_user` 表，表示该用户所属部门。

### 3. 按部门查看用户

- 在用户列表左侧点击某个部门节点，右侧表格会只显示**该部门及子部门**下的用户。
- 方便按组织架构逐级查看和管理用户。

### 4. 与「连锁总部 / 门店」的区别

| 概念         | 含义           | 主要用途               |
|--------------|----------------|------------------------|
| **组织机构（部门）** | 部门树，用于用户分组与数据权限 | 用户归属、按部门筛用户、数据权限 |
| **连锁总部**       | 业务上的“总部”实体   | 管理连锁品牌下的总部信息     |
| **门店**         | 归属总部的具体门店   | 管理每个门店的名称、地址、电话等 |

- **部门**：偏组织架构与权限，和「用户」「角色」「数据权限」强相关。
- **总部 / 门店**：偏业务实体，表示连锁体系中的总部与门店，可用于后续扩展（如按门店统计、按总部配置等）。

## 总结

- **组织机构** = 系统里的 **部门树**，在「用户列表」左侧维护和点选。
- 使用步骤：先建好部门树 → 在用户里选择部门 → 在用户列表左侧点部门筛选查看。
- 连锁业务用 **连锁管理 → 总部管理 / 门店管理**；组织架构用 **用户列表左侧部门树** 即可。
